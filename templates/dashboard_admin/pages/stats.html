{% extends 'dashboard_admin/index.html' %}

{% block 'title' %}<title>ProcuratioAdmin</title>{% endblock %}

{% block 'content' %}
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-line fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Nombres de Ventes</p>
                                <h6 class="mb-0">{{ total_transactions }}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-bar fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Total Stock</p>
                                <h6 class="mb-1">{{ total_stock }}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-area fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Réservations</p>
                                <h6 class="mb-0">{{ total_reservations }}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-pie fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Total Revenue</p>
                                <h6 class="mb-0">{{ total_revenue }} euros</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Chiffres d'affaires</h6>
                            </div>
                            <canvas id="revenue-chart"></canvas>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Achats & Ventes</h6>
                            </div>
                            <canvas id="transactions-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

    <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Réservations</h6>
                            </div>
                            <canvas id="reservation-chart"></canvas>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Clients</h6>
                            </div>
                            <canvas id="client-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>


<script>
    document.addEventListener("DOMContentLoaded", function() {
       var transactionsData = {
    labels: [{% for entry in transactions_by_day %}"{{ entry.day }}",{% endfor %}],
    datasets: [
        {
            label: 'Transactions',
            data: [{% for entry in transactions_by_day %}{{ entry.total_transactions }},{% endfor %}],
            borderColor: "#007bff",
            fill: false,
        }
    ]
};

var transactionsChart = new Chart(document.getElementById('transactions-chart'), {
    type: 'line',
    data: transactionsData,
});


   var revenueData = {
    labels: [{% for entry in revenue_by_day %}"{{ entry.day }}",{% endfor %}],
    datasets: [
        {
            label: 'Chiffre d\'affaires',
            data: [{% for entry in revenue_by_day %}{{ entry.total_revenue }},{% endfor %}],
            borderColor: "#28a745",
            fill: false,
        }
    ]
};

var revenueChart = new Chart(document.getElementById('revenue-chart'), {
    type: 'line',
    data: revenueData,
});
    var reservationsData = {
    labels: [{% for entry in reservations_by_day %}"{{ entry.day }}",{% endfor %}],
    datasets: [
        {
            label: 'Total Reservations',
            data: [{% for entry in reservations_by_day %}{{ entry.total_reservations }},{% endfor %}],
            borderColor: "#ffc107",
            fill: false,
        }
    ]
};

var reservationsChart = new Chart(document.getElementById('reservation-chart'), {
    type: 'line',
    data: reservationsData,
});




        var clientsData = {
    labels: [{% for entry in clients_by_day %}"{{ entry.day }}",{% endfor %}],
    datasets: [
        {
            label: 'Clients',
            data: [{% for entry in clients_by_day %}{{ entry.total_sessions }},{% endfor %}],  // Adjust the field name
            borderColor: "#17a2b8",
            fill: false,
        }
    ]
    };

    var clientsChart = new Chart(document.getElementById('client-chart'), {
    type: 'line',
    data: clientsData,
    });

});
</script>

{% endblock %}